<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Books</title>
  <link rel="stylesheet" href="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/trangchu/style.css"/>

  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body class="loading">
  <!-- Loading Animation -->
  <div id="loading"></div>

  <header>
    <div class="container-fluid p-0" >
      <nav class="navbar navbar-expand-lg" >
        <a class="navbar-brand"
          href="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/trangchu/trangchu.html" style="color: white !important;">
          <i class="fas fa-book-reader fa-2x mx-3"></i>KTL-Books</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <i class="fas fa-align-right text-light"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav" >
          <div class="mr-auto"></div>
          <ul class="navbar-nav">
            <li class="nav-item active">
              <a class="nav-link"
                href="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/trangchu/trangchu.html" style="color: white !important;">Trang ch·ªß
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link"
                href="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/GioiThieu/gioithieu.html" style="color: white !important;">Gi·ªõi
                thi·ªáu</a>
            </li>
            <li class="nav-item">
              <a class="nav-link"
                href="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/SanPham/sanpham.html" style="color: white !important;">S·∫£n
                ph·∫©m</a>
            </li>

            <li class="nav-item">
              <a class="nav-link"
                href="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/Tintuc/tintuc.html" style="color: white !important;">Tin
                t·ª©c</a>
            </li>
            <li class="nav-item">
              <a class="nav-link"
                href="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/Lienhe/lienhe.html" style="color: white !important;">Li√™n
                h·ªá</a>
            </li>
            <li class="nav-item">
              <a class="nav-link"
                href="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/DangNhap_DangKy/DangNhap/dangnhap.html" style="color: white !important;">ƒêƒÉng
                nh·∫≠p</a>
            </li>
          </ul>
        </div>
      </nav>
    </div>
    <div class="container text-center">
      <div class="row">
        <div class="col-md-7 col-sm-12  text-white">
          <h6>CH√ÄO M·ª™NG B·∫†N ƒê·∫æN V·ªöI</h6>
          <h1>TH∆Ø VI·ªÜN ONLINE</h1>
          <p>
            Nh·ªØng c√¢u chuy·ªán k·ª≥ b√≠, l√Ω th√∫, k·ªãch t√≠ch hay nh·ªØng b·ªô chuy·ªán vui bu·ªìn c·∫£m x√∫c ch√∫ng t√¥i ƒë·ªÅu s·∫Ω mang ƒë·∫øn cho
            b·∫°n nh∆∞ng c·∫£m x√∫c tuy·ªát v·ªùi nh·∫•t t·∫°i trang web n√†y.
          </p>
          <button class="btn btn-light px-5 py-2 primary-btn" style="background-color: #063970; color: white;"
            onclick="scrollToSection()">Kh√°m ph√° ngay</button>
        </div>
        <div class="col-md-5 col-sm-12  h-25">
          <img src="http://localhost/PHP-project/Web%20Th%C6%B0%20vi%E1%BB%87n/img/header1111.png" alt="Book" />
        </div>
      </div>
    </div>
  </header>

  <main>
    <!-- Section 3-->
    <section class="section-3" id="section-3">
      <h2 class="news-title">S·ª± ki·ªán</h2>
      <div class="news-container">
        <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active" data-bs-interval="3000">
              <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/1.jpg" class="news-image"
                alt="Slide 1">
            </div>
            <div class="carousel-item" data-bs-interval="3000">
              <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/2.jpg" class="news-image"
                alt="Slide 2">
            </div>
            <div class="carousel-item" data-bs-interval="3000">
              <img src="https://i.pinimg.com/736x/82/89/12/8289122618dab447dc5162a9a0ce5ba2.jpg" class="news-image"
                alt="Slide 3">
            </div>
            <div class="carousel-item" data-bs-interval="3000">
              <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/3.jpg" class="news-image"
                alt="Slide 1">
            </div>
            <div class="carousel-item" data-bs-interval="3000">
              <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/4.jpg" class="news-image"
                alt="Slide 2">
            </div>
            <div class="carousel-item" data-bs-interval="3000">
              <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/5.jpg" class="news-image"
                alt="Slide 3">
            </div>
          </div>

          <!-- N√∫t ƒëi·ªÅu h∆∞·ªõng tr√°i/ph·∫£i -->
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
          </button>
        </div>

        <!-- M√¥ t·∫£ tin t·ª©c -->
        <div class="news-caption">
          <h5 id="news-title">H·ªôi th·∫£o s√°ch h·∫±ng nƒÉm</h5>
          <p id="news-desc"> <strong>Th·ªùi gian:</strong>10:00 AM, 15/03/2025<br>
            <strong>ƒê·ªãa ƒëi·ªÉm:</strong>Th∆∞ vi·ªán Qu·ªëc gia, H√† N·ªôi<br>
            <strong>M√¥ t·∫£:</strong>H·ªôi th·∫£o s√°ch h·∫±ng nƒÉm l√† m·ªôt s·ª± ki·ªán quan tr·ªçng nh·∫±m t√¥n vinh vƒÉn h√≥a ƒë·ªçc v√† khuy·∫øn
            kh√≠ch th√≥i quen ƒë·ªçc s√°ch trong c·ªông ƒë·ªìng. Ch∆∞∆°ng tr√¨nh nƒÉm nay quy t·ª• nhi·ªÅu nh√† vƒÉn, nh√† nghi√™n c·ª©u v√†
            chuy√™n gia xu·∫•t b·∫£n h√†ng ƒë·∫ßu, h·ª©a h·∫πn mang ƒë·∫øn nh·ªØng g√≥c nh√¨n m·ªõi v·ªÅ ng√†nh xu·∫•t b·∫£n hi·ªán ƒë·∫°i. Ngo√†i ra, c√°c
            ƒë·ªôc gi·∫£ c≈©ng s·∫Ω c√≥ c∆° h·ªôi tham gia c√°c bu·ªïi t·ªça ƒë√†m, workshop k·ªπ nƒÉng ƒë·ªçc hi·ªáu qu·∫£, c≈©ng nh∆∞ giao l∆∞u v·ªõi
            c√°c t√°c gi·∫£ n·ªïi ti·∫øng. S·ª± ki·ªán kh√¥ng ch·ªâ d√†nh cho nh·ªØng ng∆∞·ªùi y√™u s√°ch m√† c√≤n cho c√°c nh√† xu·∫•t b·∫£n, nh√† gi√°o
            d·ª•c v√† nh·ªØng ai quan t√¢m ƒë·∫øn t∆∞∆°ng lai c·ªßa s√°ch.<br>
            <strong>Th√¥ng tin li√™n h·ªá:</strong>Li√™n h·ªá: 0987 654 321
          </p>
        </div>
      </div>
    </section>

    <section class="news-section">
      <h2 class="text-center text-primary mb-4">
        <i class="bi bi-newspaper"></i> Tin T·ª©c M·ªõi Nh·∫•t
      </h2>
      <div class="row row-cols-1 row-cols-md-4 g-4" id="news-list">
        <!-- Tin t·ª©c s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y -->
      </div>
    </section>

    <!-- Modal Chi Ti·∫øt -->
    <div class="modal fade" id="newsModal" tabindex="-1" aria-labelledby="newsModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="newsModalLabel"></h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <img id="newsImage" class="modal-news-image mb-3" src="" alt="">
            <p class="text-muted"><small>üïí Ng√†y ƒëƒÉng: <span id="newsDate"></span></small></p>
            <p id="newsContent"></p>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        loadNews();
      });

      function loadNews() {
        fetch("hienthitintuc.php")
          .then(response => response.json())
          .then(data => {
            let newsList = document.getElementById("news-list");
            newsList.innerHTML = "";

            data.forEach(news => {
              const title = news.tieu_de || "Kh√¥ng c√≥ ti√™u ƒë·ªÅ";
              const description = news.mo_ta || "Kh√¥ng c√≥ m√¥ t·∫£";
              const content = news.noi_dung || "N·ªôi dung kh√¥ng kh·∫£ d·ª•ng";
              const image = news.hinh_anh || "default.png";
              const date = news.ngay_dang || "N/A";

              newsList.innerHTML += `
                            <div class="col">
                                <div class="card news-card shadow-sm">
                                    <img src="${image}" class="card-img-top news-image-tin-tuc" alt="H√¨nh ·∫£nh tin t·ª©c">
                                    <div class="card-body">
                                        <h5 class="card-title">${title}</h5>
                                        <p class="card-text">${description.substring(0, 100)}...</p>
                                        <p class="text-muted"><small>üïí Ng√†y ƒëƒÉng: ${date}</small></p>
                                        <button class="btn btn-primary btn-sm" 
                                            onclick="showNewsDetails('${title}', '${description}', '${content}', '${image}', '${date}')">
                                            Xem Chi Ti·∫øt
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
            });
          })
          .catch(error => console.error("L·ªói t·∫£i tin t·ª©c:", error));
      }

      function showNewsDetails(title, description, content, image, date) {
        document.getElementById("newsModalLabel").innerText = title;
        document.getElementById("newsDate").innerText = date;
        document.getElementById("newsContent").innerText = content;
        document.getElementById("newsImage").src = image;
        var newsModal = new bootstrap.Modal(document.getElementById("newsModal"));
        newsModal.show();
      }
    </script>

    <!-- Section 1-->
    <div class="sach-moi">
      <div class="row align-items-center">
        <!-- Ph·∫ßn h√¨nh ·∫£nh b√™n tr√°i (40%) -->
        <div class="col-md-4 text-center">
          <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/pic-decor-left.png" alt="Icon tr√°i"
            class="img-fluid decor-left">
          <!-- H·ªôp hi·ªÉn th·ªã c√¢u n√≥i -->
          <div class="quote-box" id="quoteBox">H√£y s·ªëng h·∫øt m√¨nh!</div>
        </div>

        <!-- Ph·∫ßn s√°ch b√™n ph·∫£i (60%) -->
        <div class="col">
          <h2 class="text-center">S√°ch m·ªõi nh·∫•t</h2>
          <div class="row" id="book-list"></div>
        </div>
      </div>
    </div>


    <!-- Modal Bootstrap -->
    <div class="modal fade" id="bookModal" tabindex="-1" aria-labelledby="bookModalLabel">
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content p-3">
          <div class="modal-header">
            <h4 class="modal-title fw-bold" id="bookModalLabel"></h4>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row align-items-center">
              <div class="col-md-5 text-center">
                <img id="modalImage" src="" class="img-fluid rounded shadow border"
                  style="max-width: 100%; height: auto; max-height: 400px;">
              </div>
              <div class="col-md-7">
                <p class="fs-4"><strong>T√°c gi·∫£:</strong> <span id="modalAuthor"></span></p>
                <p class="fs-4"><strong>NƒÉm XB:</strong> <span id="modalYear"></span></p>
                <p class="fs-4"><strong>S·ªë l∆∞·ª£ng:</strong> <span id="modalQuantity"></span></p>
                <p class="fs-4"><strong>L∆∞·ª£t xem:</strong> <span id="modalViews"></span></p>
                <p class="fs-4"><strong>Ch·ªß ƒë·ªÅ:</strong> <span id="modalCategory"></span></p>
              </div>
            </div>
          </div>
          <div class="modal-footer d-flex justify-content-between">
            <div>
              <button type="button" class="btn btn-lg btn-success">üìñ ƒê·ªçc ngay</button>
              <button type="button" class="btn btn-lg btn-dark">üìÇ L∆∞u s√°ch</button>
            </div>
            <button type="button" class="btn btn-lg btn-secondary" data-bs-dismiss="modal">‚ùå ƒê√≥ng</button>
          </div>
        </div>
      </div>
    </div>


    <script>
      document.addEventListener("DOMContentLoaded", function () {
        loadBooks();
      });

      function loadBooks() {
        fetch("hien_thi_sach_moi.php")
          .then(response => response.json())
          .then(data => {
            let bookList = document.getElementById("book-list");
            bookList.innerHTML = "";

            data.forEach(book => {
              const tenSach = book.ten_sach || "Ch∆∞a c√≥ ti√™u ƒë·ªÅ";
              const tacGia = book.tac_gia || "Kh√¥ng r√µ";
              const namXB = book.nam_xuat_ban || "N/A";
              const hinhAnh = book.hinh_anh || "img/default.png";
              const soLuong = book.so_luong ?? "N/A";
              const luotXem = book.so_luot_xem ?? "0";
              const chuDe = book.ten_chu_de || "Kh√¥ng x√°c ƒë·ªãnh"; // L·∫•y ch·ªß ƒë·ªÅ

              bookList.innerHTML += `
                    <div class="col-5 col-md-4 col-lg-2 mb-4">
                        <div class="card book-card shadow-sm" 
                             onclick="showBookModal('${tenSach}', '${tacGia}', '${namXB}', '${hinhAnh}', '${soLuong}', '${luotXem}', '${chuDe}')">
                            <img src="${hinhAnh}" class="card-img-top" alt="${tenSach}" 
                                 onerror="this.onerror=null; this.src='img/default.png';">
                            <div class="card-body text-center">
                                <h5 class="card-title">${tenSach}</h5>
                            </div>
                        </div>
                    </div>
                `;
            });

          })
          .catch(error => console.error("L·ªói t·∫£i d·ªØ li·ªáu:", error));
      }

      function showBookModal(ten, tacGia, namXB, hinhAnh, soLuong, luotXem, chuDe) {
        document.getElementById("bookModalLabel").innerText = ten;
        document.getElementById("modalAuthor").innerText = tacGia;
        document.getElementById("modalYear").innerText = namXB;
        document.getElementById("modalImage").src = hinhAnh;
        document.getElementById("modalQuantity").innerText = soLuong !== null ? soLuong : "N/A";
        document.getElementById("modalViews").innerText = luotXem !== null ? luotXem : "0";
        document.getElementById("modalCategory").innerText = chuDe; // Hi·ªÉn th·ªã ch·ªß ƒë·ªÅ

        var myModal = new bootstrap.Modal(document.getElementById('bookModal'));
        myModal.show();
      }


      document.addEventListener("DOMContentLoaded", function () {
        const sachHotSection = document.querySelector(".sach-moi");

        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              sachHotSection.classList.add("show");
              sachHotSection.classList.remove("hidden"); // Hi·ªÉn th·ªã khi cu·ªôn v√†o
            } else {
              sachHotSection.classList.add("hidden"); // ·∫®n khi cu·ªôn ra ngo√†i
            }
          });
        }, { threshold: 0.2 });

        observer.observe(sachHotSection);
      });

      document.addEventListener("DOMContentLoaded", function () {
        const sachMoiSection = document.querySelector(".sach-moi");
        const decorLeftImage = document.querySelector(".decor-left");

        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              sachMoiSection.classList.add("show");
              decorLeftImage.classList.add("show");
            } else {
              sachMoiSection.classList.remove("show");
              decorLeftImage.classList.remove("show");
            }
          });
        }, { threshold: 0.05 });

        observer.observe(sachMoiSection);
      });

      document.addEventListener("DOMContentLoaded", function () {
        const quotes = [
          "Kh√¥ng c√≥ g√¨ l√† kh√¥ng th·ªÉ!",
          "S√°ch l√† √°nh s√°ng d·∫´n ƒë∆∞·ªùng.",
          "H·ªçc t·∫≠p kh√¥ng bao gi·ªù l√† ƒë·ªß.",
          "B·∫Øt ƒë·∫ßu ngay h√¥m nay!",
          "M·ªói ng√†y l√† m·ªôt c∆° h·ªôi m·ªõi."
        ];

        const quoteBox = document.getElementById("quoteBox");
        const image = document.querySelector(".decor-left");

        // C·∫≠p nh·∫≠t c√¢u n√≥i khi di chu·ªôt v√†o h√¨nh
        image.addEventListener("mouseenter", function () {
          quoteBox.textContent = quotes[Math.floor(Math.random() * quotes.length)];
        });
      });
    </script>



    <!-- Ph·∫ßn hi·ªÉn th·ªã S√°ch Hot -->
    <div class="sach-hot">
      <div class="row align-items-center">
        <!-- Ph·∫ßn s√°ch b√™n ph·∫£i (60%) -->
        <div class="row align-items-center">
          <div class="col-md-8"> <!-- Ph·∫ßn s√°ch -->
            <h2 class="text-center">S√°ch ƒê∆∞·ª£c Xem Nhi·ªÅu Nh·∫•t</h2>
            <div class="row" id="hot-book-list"></div>
          </div>
          <!-- Ph·∫ßn h√¨nh ·∫£nh b√™n tr√°i (40%) -->
          <div class="col-md-4" style="padding-right: 0;">
            <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/pic-decor-right.png" alt="S√°ch hot"
              class="img-fluid decor-left">
          </div>
        </div>
      </div>

      <div class="modal fade" id="hotBookModal" tabindex="-1" aria-labelledby="hotBookModalLabel">
        <div class="modal-dialog modal-dialog-centered modal-lg">
          <div class="modal-content p-3">
            <div class="modal-header">
              <h4 class="modal-title fw-bold" id="hotBookModalLabel"></h4>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="row align-items-center">
                <div class="col-md-5 text-center">
                  <img id="hotModalImage" src="" class="img-fluid rounded shadow border">
                </div>
                <div class="col-md-7">
                  <p class="fs-4"><strong>T√°c gi·∫£:</strong> <span id="hotModalAuthor"></span></p>
                  <p class="fs-4"><strong>NƒÉm XB:</strong> <span id="hotModalYear"></span></p>
                  <p class="fs-4"><strong>S·ªë l∆∞·ª£ng:</strong> <span id="hotModalQuantity"></span></p>
                  <p class="fs-4"><strong>L∆∞·ª£t xem:</strong> <span id="hotModalViews"></span></p>
                  <p class="fs-4"><strong>Ch·ªß ƒë·ªÅ:</strong> <span id="hotModalCategory"></span></p>
                </div>
              </div>
            </div>
            <div class="modal-footer d-flex justify-content-between">
              <div>
                <button type="button" class="btn btn-lg btn-success">üìñ ƒê·ªçc ngay</button>
                <button type="button" class="btn btn-lg btn-dark">üìÇ L∆∞u s√°ch</button>
                <!-- ƒê·ªïi m√†u icon sang ƒëen -->
              </div>
              <button type="button" class="btn btn-lg btn-secondary" data-bs-dismiss="modal">‚ùå ƒê√≥ng</button>
            </div>
          </div>
        </div>
      </div>


      <script>
        document.addEventListener("DOMContentLoaded", function () {
          loadHotBooks();
        });

        function loadHotBooks() {
          fetch("hien_thi_sach_hot.php")
            .then(response => response.json())
            .then(data => {
              let bookList = document.getElementById("hot-book-list");
              bookList.innerHTML = "";

              data.forEach(book => {
                const tenSach = book.ten_sach || "Ch∆∞a c√≥ ti√™u ƒë·ªÅ";
                const tacGia = book.tac_gia || "Kh√¥ng r√µ";
                const namXB = book.nam_xuat_ban || "N/A";
                const hinhAnh = book.hinh_anh || "img/default.png";
                const soLuong = book.so_luong ?? "N/A";
                const luotXem = book.so_luot_xem ?? "0";
                const chuDe = book.ten_chu_de || "Kh√¥ng x√°c ƒë·ªãnh"; // Th√™m ch·ªß ƒë·ªÅ

                bookList.innerHTML += `
                    <div class="col-6 col-md-4 col-lg-2 mb-4">
                        <div class="card book-card shadow-sm" 
                             onclick="showHotBookModal('${tenSach}', '${tacGia}', '${namXB}', '${hinhAnh}', '${soLuong}', '${luotXem}', '${chuDe}')">
                            <img src="${hinhAnh}" class="card-img-top" alt="${tenSach}" 
                                 onerror="this.onerror=null; this.src='img/default.png';">
                            <div class="card-body text-center">
                                <h5 class="card-title">${tenSach}</h5>
                            </div>
                        </div>
                    </div>
                `;
              });
            })
            .catch(error => console.error("L·ªói t·∫£i d·ªØ li·ªáu:", error));
        }

        function showHotBookModal(ten, tacGia, namXB, hinhAnh, soLuong, luotXem, chuDe) {
          console.log("M·ªü modal v·ªõi:", ten, tacGia, namXB, hinhAnh, soLuong, luotXem, chuDe);

          // Ki·ªÉm tra ph·∫ßn t·ª≠ c√≥ t·ªìn t·∫°i kh√¥ng
          if (!document.getElementById("hotBookModalLabel")) {
            console.error("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ hotBookModalLabel");
            return;
          }
          if (!document.getElementById("hotModalCategory")) {
            console.error("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ hotModalCategory");
            return;
          }

          document.getElementById("hotBookModalLabel").innerText = ten;
          document.getElementById("hotModalAuthor").innerText = tacGia;
          document.getElementById("hotModalYear").innerText = namXB;
          document.getElementById("hotModalImage").src = hinhAnh;
          document.getElementById("hotModalQuantity").innerText = soLuong !== null ? soLuong : "N/A";
          document.getElementById("hotModalViews").innerText = luotXem !== null ? luotXem : "0";
          document.getElementById("hotModalCategory").innerText = chuDe; // Hi·ªÉn th·ªã ch·ªß ƒë·ªÅ

          var myModal = new bootstrap.Modal(document.getElementById('hotBookModal'));
          myModal.show();
        }



        document.addEventListener("DOMContentLoaded", function () {
          const hotBookList = document.getElementById("hot-book-list");

          const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                hotBookList.classList.add("show");
              } else {
                hotBookList.classList.remove("show");
              }
            });
          }, { threshold: 0.2 });

          observer.observe(hotBookList);
        });


      </script>


      <!-- Section 2-->
      <section class="section-2 container-fluid p-0">
        <div class="purchase text-center" style="background-color: #063970; padding-bottom: 15px;">
          <h1>H√£y ·ªßng h·ªô ch√∫ng t√¥i</h1>
          <p>
            N·∫øu b·∫°n th·∫•y trang web n√†y hay v√† gi√∫p b·∫°n gi·∫£i tr√≠.
          </p>
          <div class="donate-container">
            <h2>Ch·ªçn s·ªë ti·ªÅn b·∫°n mu·ªën Donate</h2>
            <div class="slider-container">
              <input type="range" min="1" max="500" step="1" value="30" class="slider" id="donateSlider">
            </div>
            <p>S·ªë ti·ªÅn: <span class="amount" id="donateAmount">$30</span></p>
            <button class="donate-button" onclick="openModal()">Donate ngay</button>
          </div>

          <!-- Pop-up Thanh To√°n -->
          <div id="paymentModal" class="modal">
            <div class="modal-content">
              <span class="close" onclick="closeModal()">&times;</span>
              <h2>Thanh To√°n</h2>
              <p>B·∫°n ƒëang donate: <strong id="selectedAmount">$30</strong></p>

              <h3>Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n:</h3>
              <label><input type="radio" name="payment" value="credit" checked> Th·∫ª t√≠n d·ª•ng</label>
              <label><input type="radio" name="payment" value="paypal"> PayPal</label>
              <label><input type="radio" name="payment" value="momo"> V√≠ MoMo</label>
              <label><input type="radio" name="payment" value="bank"> Chuy·ªÉn kho·∫£n ng√¢n h√†ng</label>

              <button class="donate-button" onclick="confirmDonation()">X√°c nh·∫≠n thanh to√°n</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Section 4 -->
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const cards = document.querySelectorAll(".review-card");
          let index = 2;

          function updateCarousel() {
            cards.forEach((card) => {
              card.classList.remove("active");
            });
            cards[index].classList.add("active");
          }

          function moveNext() {
            index = (index + 1) % cards.length;
            updateCarousel();
          }

          setInterval(moveNext, 3000);
        });
      </script>
      <section class="section-4 py-5 bg-light">
        <div class="custom-container text-center">
          <h1 class="text-dark mb-4">ƒê√°nh gi√° c·ªßa kh√°ch h√†ng</h1>
          <div class="row justify-content-center">
            <div class="col-md-2 review-card">
              <div class="card shadow-lg border-0 h-100">
                <div class="card-img-top text-center py-3">
                  <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/customer-3.png"
                    class="img-fluid rounded-circle customer-img" alt="">
                </div>
                <div class="card-body text-center">
                  <h3 class="card-title">Blalock Jolene</h3>
                  <p class="card-text text-muted">
                    Nh·ªØng c√¢u chuy·ªán tuy·ªát v·ªùi, gi√∫p t√¥i gi·∫£i tr√≠ sau nh·ªØng gi·ªù l√†m vi·ªác m·ªát m·ªèi. N·ªôi dung ly k·ª≥ h·∫•p d·∫´n
                    khi·∫øn t√¥i kh√¥ng th·ªÉ r·ªùi m·∫Øt.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-2 review-card">
              <div class="card shadow-lg border-0 h-100">
                <div class="card-img-top text-center py-3">
                  <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/customer-1.png"
                    class="img-fluid rounded-circle customer-img" alt="">
                </div>
                <div class="card-body text-center">
                  <h3 class="card-title">Allen Agnes</h3>
                  <p class="card-text text-muted">
                    Nh·ªØng c√¢u chuy·ªán th√∫ v·ªã gi√∫p t√¥i th∆∞ gi√£n v√† qu√™n ƒëi m·ªát m·ªèi. N·ªôi dung h·∫•p d·∫´n l√†m t√¥i kh√¥ng th·ªÉ
                    d·ª´ng ƒë·ªçc.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-2 review-card active">
              <div class="card shadow-lg border-0 h-100">
                <div class="card-img-top text-center py-3">
                  <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/customer-2.png"
                    class="img-fluid rounded-circle customer-img" alt="">
                </div>
                <div class="card-body text-center">
                  <h3 class="card-title">Olivia Louis</h3>
                  <p class="card-text text-muted">
                    C√¢u chuy·ªán h·∫•p d·∫´n gi√∫p t√¥i c√≥ nh·ªØng gi√¢y ph√∫t th∆∞ gi√£n tuy·ªát v·ªùi sau gi·ªù l√†m vi·ªác cƒÉng th·∫≥ng.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-2 review-card">
              <div class="card shadow-lg border-0 h-100">
                <div class="card-img-top text-center py-3">
                  <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/customer-4.png"
                    class="img-fluid rounded-circle customer-img" alt="">
                </div>
                <div class="card-body text-center">
                  <h3 class="card-title">Michael Smith</h3>
                  <p class="card-text text-muted">
                    Nh·ªØng c√¢u chuy·ªán mang ƒë·∫øn tr·∫£i nghi·ªám tuy·ªát v·ªùi, n·ªôi dung phong ph√∫ v√† r·∫•t s√°ng t·∫°o.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-2 review-card">
              <div class="card shadow-lg border-0 h-100">
                <div class="card-img-top text-center py-3">
                  <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/customer-5.png"
                    class="img-fluid rounded-circle customer-img" alt="">
                </div>
                <div class="card-body text-center">
                  <h3 class="card-title">Emma Johnson</h3>
                  <p class="card-text text-muted">
                    ƒê·ªçc truy·ªán ·ªü ƒë√¢y l√† tr·∫£i nghi·ªám th√∫ v·ªã nh·∫•t c·ªßa t√¥i. N·ªôi dung l√¥i cu·ªën, h·∫•p d·∫´n.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Icons g√≥c d∆∞·ªõi b√™n ph·∫£i -->
      <div class="floating-icons">
        <a href="#" class="icon-btn chat-btn">
          <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/man-2_icon-icons.com_55041.png"
            alt="C√° nh√¢n">
        </a>
        <a href="#" class="icon-btn balo-btn" data-bs-toggle="modal" data-bs-target="#baloModal">
          <img
            src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/shoppaymentorderbuy-34_icon-icons.com_73865.png"
            alt="Balo">
        </a>
        <a href="#" class="icon-btn scroll-top-btn">
          <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/arrow_circle_up_icon_155797.png"
            alt="L√™n ƒë·∫ßu trang">
        </a>
        <a href="#" class="icon-btn scroll-top-btn" data-bs-toggle="modal" data-bs-target="#chatModal">
          <img
            src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/social_facebook_messenger_icon-icons.com_66150.png"
            alt="Chat">
        </a>
      </div>

      <div class="modal fade" id="chatModal" tabindex="-1" aria-labelledby="chatModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="chatModalLabel">Chat v·ªõi AI</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div id="chat-output" class="border p-3 mb-3" style="height: 250px; overflow-y: auto;"></div>
              <div class="input-group">
                <input type="text" id="chat-input" class="form-control" placeholder="Nh·∫≠p tin nh·∫Øn...">
                <button id="sendMessage" class="btn btn-success">G·ª≠i</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const chatOutput = document.getElementById("chat-output");
          const chatInput = document.getElementById("chat-input");
          const sendMessage = document.getElementById("sendMessage");

          sendMessage.addEventListener("click", function () {
            const userMessage = chatInput.value.trim();
            if (userMessage === "") return;

            // Hi·ªÉn th·ªã tin nh·∫Øn ng∆∞·ªùi d√πng
            chatOutput.innerHTML += `<div><strong>B·∫°n:</strong> ${userMessage}</div>`;
            chatInput.value = "";

            // G·ª≠i ƒë·∫øn server ƒë·ªÉ x·ª≠ l√Ω AI
            fetch("chat_ai.php", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ message: userMessage })
            })
              .then(response => response.json())
              .then(data => {
                chatOutput.innerHTML += `<div><strong>AI:</strong> ${data.reply}</div>`;
                chatOutput.scrollTop = chatOutput.scrollHeight; // Cu·ªôn xu·ªëng tin nh·∫Øn m·ªõi nh·∫•t
              })
              .catch(error => console.error("L·ªói g·ª≠i tin nh·∫Øn:", error));
          });
        });
      </script>

      <!-- Modal Balo -->
      <div class="modal fade" id="baloModal" tabindex="-1" aria-labelledby="baloModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
          <div class="modal-content p-3">
            <div class="modal-header">
              <h4 class="modal-title fw-bold" id="baloModalLabel">S√°ch ƒë√£ l∆∞u</h4>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <ul id="savedBooksList" class="list-group">
                <!-- Danh s√°ch s√°ch s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y -->
              </ul>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-lg btn-secondary" data-bs-dismiss="modal"> ƒê√≥ng</button>
            </div>
          </div>
        </div>
      </div>
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          loadSavedBooks(); // G·ªçi h√†m t·∫£i s√°ch khi trang t·∫£i xong

          // S·ª± ki·ªán khi b·∫•m n√∫t "Th√™m v√†o balo"
          document.addEventListener("click", function (event) {
            if (!event.target.classList.contains("btn-dark")) return;

            let modal = event.target.closest(".modal");
            if (!modal) return;

            let title, author, year, imageSrc;
            if (modal.id === "bookModal") {
              title = document.getElementById("bookModalLabel").innerText;
              author = document.getElementById("modalAuthor").innerText;
              year = document.getElementById("modalYear").innerText;
              imageSrc = document.getElementById("modalImage").src;
            } else if (modal.id === "hotBookModal") {
              title = document.getElementById("hotBookModalLabel").innerText;
              author = document.getElementById("hotModalAuthor").innerText;
              year = document.getElementById("hotModalYear").innerText;
              imageSrc = document.getElementById("hotModalImage").src;
            } else {
              return;
            }

            const savedBooksList = document.getElementById("savedBooksList");

            // ‚ùå Ki·ªÉm tra n·∫øu s√°ch ƒë√£ t·ªìn t·∫°i trong danh s√°ch th√¨ kh√¥ng th√™m n·ªØa
            if ([...savedBooksList.children].some(li => li.dataset.title === title)) {
              alert("S√°ch ƒë√£ t·ªìn t·∫°i trong balo!");
              return;
            }

            // ‚úÖ Th√™m s√°ch v√†o danh s√°ch hi·ªÉn th·ªã
            const listItem = document.createElement("li");
            listItem.classList.add("list-group-item", "d-flex", "align-items-center", "justify-content-between");
            listItem.dataset.title = title;

            listItem.innerHTML = `
            <img src="${imageSrc}" class="rounded shadow border" style="width: 50px;">
            <span><strong>${title}</strong> - ${author} (${year})</span>
            <div class="saved-book-buttons">
                <button class="btn btn-sm btn-success">üìñ ƒê·ªçc ngay</button>
                <button class="btn btn-sm btn-danger">‚ùå X√≥a</button>
            </div>
        `;
            savedBooksList.appendChild(listItem);

            alert("S√°ch ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o balo!");

            // üî• G·ª≠i d·ªØ li·ªáu l√™n server ƒë·ªÉ l∆∞u v√†o CSDL
            fetch("save_book.php", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ title, author, year, image_url: imageSrc }),
            })
              .then(response => response.json())
              .then(data => {
                if (data.status === "success") {
                  console.log("S√°ch ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o CSDL!");
                } else {
                  console.error("L·ªói l∆∞u s√°ch:", data.message);
                }
              })
              .catch(error => console.error("L·ªói g·ª≠i y√™u c·∫ßu:", error));
          });

          // S·ª± ki·ªán x√≥a s√°ch kh·ªèi danh s√°ch
          document.addEventListener("click", function (event) {
            if (!event.target.classList.contains("btn-danger")) return;

            let listItem = event.target.closest("li");
            if (!listItem) return;

            let title = listItem.dataset.title;

            if (!confirm(`B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s√°ch "${title}" kh·ªèi balo?`)) return;

            // ‚ùå Tr√°nh x√≥a 2 l·∫ßn b·∫±ng c√°ch ki·ªÉm tra s√°ch c√≥ t·ªìn t·∫°i kh√¥ng tr∆∞·ªõc khi g·ªçi API
            if (!document.body.contains(listItem)) {
              return;
            }

            fetch("xoa_saved_sach.php", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ ten_sach: title })
            })
              .then(response => response.json())
              .then(data => {
                if (data.success) {
                  listItem.remove(); // ‚úÖ X√≥a kh·ªèi danh s√°ch hi·ªÉn th·ªã
                  alert("S√°ch ƒë√£ ƒë∆∞·ª£c x√≥a kh·ªèi balo!");
                } else {
                  alert("L·ªói khi x√≥a s√°ch: " + data.message);
                }
              })
              .catch(error => console.error("L·ªói g·ª≠i y√™u c·∫ßu x√≥a:", error));
          });

        });

        // H√†m t·∫£i s√°ch ƒë√£ l∆∞u t·ª´ CSDL
        function loadSavedBooks() {
          fetch("get_saved_books.php")
            .then(response => response.json())
            .then(data => {
              if (data.status === "success") {
                const books = data.books;
                const savedBooksList = document.getElementById("savedBooksList");
                savedBooksList.innerHTML = ""; // X√≥a danh s√°ch c≈©

                books.forEach(book => {
                  const listItem = document.createElement("li");
                  listItem.classList.add("list-group-item", "d-flex", "align-items-center", "justify-content-between");
                  listItem.dataset.title = book.book_title;

                  listItem.innerHTML = `
                        <img src="${book.image_url}" class="rounded shadow border" style="width: 50px;">
                        <span><strong>${book.book_title}</strong> - ${book.author} (${book.year})</span>
                        <div class="saved-book-buttons">
                            <button class="btn btn-sm btn-success">üìñ ƒê·ªçc ngay</button>
                            <button class="btn btn-sm btn-danger">‚ùå X√≥a</button>
                        </div>
                    `;
                  savedBooksList.appendChild(listItem);
                });
              } else {
                console.error("L·ªói: ", data.message);
              }
            })
            .catch(error => console.error("L·ªói khi t·∫£i s√°ch:", error));
        }


      </script>



      <!-- Modal Person -->
      <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="userModalLabel">Th√¥ng tin ng∆∞·ªùi d√πng</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p><strong>H·ªç T√™n:</strong> <span id="popup-ho-ten"></span></p>
              <p><strong>Email:</strong> <span id="popup-email"></span></p>
              <p><strong>T√†i kho·∫£n:</strong> <span id="popup-username"></span></p>
              <p><strong>Tu·ªïi:</strong> <span id="popup-tuoi"></span></p>
              <p><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> <span id="popup-so-dien-thoai"></span></p>
              <p><strong>ƒê·ªãa ch·ªâ:</strong> <span id="popup-dia-chi"></span></p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-danger" id="logoutBtn">
                ƒêƒÉng xu·∫•t
              </button>
              <button type="button" class="btn btn-primary" id="editInfoBtn">
                S·ª≠a th√¥ng tin
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal S·ª≠a Th√¥ng Tin -->
      <div class="modal fade" id="editUserModal" tabindex="-1" aria-labelledby="editUserModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="editUserModalLabel">S·ª≠a Th√¥ng Tin</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form id="editUserForm">
                <div class="mb-3">
                  <label for="editHoTen" class="form-label">H·ªç T√™n</label>
                  <input type="text" class="form-control" id="editHoTen" required>
                </div>
                <div class="mb-3">
                  <label for="editTaiKhoan" class="form-label">T√†i Kho·∫£n</label>
                  <input type="text" class="form-control" id="editTaiKhoan" required>
                </div>
                <div class="mb-3">
                  <label for="editMatKhau" class="form-label">M·∫≠t Kh·∫©u</label>
                  <input type="password" class="form-control" id="editMatKhau" required>
                </div>
                <div class="mb-3">
                  <label for="editTuoi" class="form-label">Tu·ªïi</label>
                  <input type="number" class="form-control" id="editTuoi" required>
                </div>
                <div class="mb-3">
                  <label for="editEmail" class="form-label">Email</label>
                  <input type="email" class="form-control" id="editEmail" required>
                </div>
                <div class="mb-3">
                  <label for="editSoDienThoai" class="form-label">S·ªë ƒêi·ªán Tho·∫°i</label>
                  <input type="text" class="form-control" id="editSoDienThoai" required>
                </div>
                <div class="mb-3">
                  <label for="editDiaChi" class="form-label">ƒê·ªãa Ch·ªâ</label>
                  <input type="text" class="form-control" id="editDiaChi" required>
                </div>
                <button type="submit" class="btn btn-primary">L∆∞u Thay ƒê·ªïi</button>
              </form>
            </div>
          </div>
        </div>
      </div>


      <script>
        document.addEventListener("DOMContentLoaded", function () {
          let editBtn = document.getElementById("editInfoBtn");

          if (!editBtn) {
            console.error("Kh√¥ng t√¨m th·∫•y n√∫t #editInfoBtn.");
            return;
          }

          editBtn.addEventListener("click", function () {
            let hoTenElem = document.getElementById("popup-ho-ten");
            let emailElem = document.getElementById("popup-email");
            let usernameElem = document.getElementById("popup-username");
            let tuoiElem = document.getElementById("popup-tuoi");
            let soDienThoaiElem = document.getElementById("popup-so-dien-thoai");
            let diaChiElem = document.getElementById("popup-dia-chi");

            if (!hoTenElem || !emailElem || !usernameElem || !tuoiElem || !soDienThoaiElem || !diaChiElem) {
              console.error("Kh√¥ng t√¨m th·∫•y m·ªôt trong c√°c ph·∫ßn t·ª≠ th√¥ng tin ng∆∞·ªùi d√πng.");
              return;
            }

            let editHoTen = document.getElementById("editHoTen");
            let editTaiKhoan = document.getElementById("editTaiKhoan");
            let editMatKhau = document.getElementById("editMatKhau");
            let editTuoi = document.getElementById("editTuoi");
            let editEmail = document.getElementById("editEmail");
            let editSoDienThoai = document.getElementById("editSoDienThoai");
            let editDiaChi = document.getElementById("editDiaChi");

            if (!editHoTen || !editTaiKhoan || !editMatKhau || !editTuoi || !editEmail || !editSoDienThoai || !editDiaChi) {
              console.error("Kh√¥ng t√¨m th·∫•y m·ªôt trong c√°c ph·∫ßn t·ª≠ form ch·ªânh s·ª≠a.");
              return;
            }

            editHoTen.value = hoTenElem.textContent.trim();
            editTaiKhoan.value = usernameElem.textContent.trim();
            editMatKhau.value = "";
            editTuoi.value = tuoiElem.textContent.trim();
            editEmail.value = emailElem.textContent.trim();
            editSoDienThoai.value = soDienThoaiElem.textContent.trim();
            editDiaChi.value = diaChiElem.textContent.trim();

            let editModalElem = document.getElementById("editUserModal");
            if (!editModalElem) {
              console.error("Kh√¥ng t√¨m th·∫•y modal #editUserModal.");
              return;
            }

            let editModal = new bootstrap.Modal(editModalElem);
            editModal.show();
          });

          let editUserForm = document.getElementById("editUserForm");
          if (!editUserForm) {
            console.error("Kh√¥ng t√¨m th·∫•y form #editUserForm.");
            return;
          }

          editUserForm.addEventListener("submit", function (event) {
            event.preventDefault();

            let updatedUserInfo = {
              taiKhoan: document.getElementById("editTaiKhoan").value.trim(),
              matKhau: document.getElementById("editMatKhau").value.trim(),
              hoTen: document.getElementById("editHoTen").value.trim(),
              tuoi: document.getElementById("editTuoi").value.trim(),
              email: document.getElementById("editEmail").value.trim(),
              soDienThoai: document.getElementById("editSoDienThoai").value.trim(),
              diaChi: document.getElementById("editDiaChi").value.trim(),
            };

            console.log("D·ªØ li·ªáu g·ª≠i ƒëi:", updatedUserInfo);

            fetch("suathongtin.php", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(updatedUserInfo),
            })
              .then(response => response.json())
              .then(data => {
                console.log("Ph·∫£n h·ªìi t·ª´ server:", data);
                if (data.success) {
                  alert("C·∫≠p nh·∫≠t th√¥ng tin th√†nh c√¥ng!");
                  // C·∫≠p nh·∫≠t n·ªôi dung modal ngay l·∫≠p t·ª©c
                  document.getElementById("popup-ho-ten").innerText = updatedUserInfo.hoTen;
                  document.getElementById("popup-email").innerText = updatedUserInfo.email;
                  document.getElementById("popup-username").innerText = updatedUserInfo.taiKhoan;
                  document.getElementById("popup-tuoi").innerText = updatedUserInfo.tuoi;
                  document.getElementById("popup-so-dien-thoai").innerText = updatedUserInfo.soDienThoai;
                  document.getElementById("popup-dia-chi").innerText = updatedUserInfo.diaChi;

                  // C·∫≠p nh·∫≠t cookie ƒë·ªÉ gi·ªØ th√¥ng tin m·ªõi
                  document.cookie = `hoTen=${encodeURIComponent(updatedUserInfo.hoTen)}; path=/`;
                  document.cookie = `email=${encodeURIComponent(updatedUserInfo.email)}; path=/`;
                  document.cookie = `username=${encodeURIComponent(updatedUserInfo.taiKhoan)}; path=/`;
                  document.cookie = `tuoi=${encodeURIComponent(updatedUserInfo.tuoi)}; path=/`;
                  document.cookie = `soDienThoai=${encodeURIComponent(updatedUserInfo.soDienThoai)}; path=/`;
                  document.cookie = `diaChi=${encodeURIComponent(updatedUserInfo.diaChi)}; path=/`;
                } else {
                  alert("L·ªói: " + data.error);
                }
              })
              .catch(error => {
                console.error("L·ªói khi g·ª≠i y√™u c·∫ßu:", error);
                alert("C√≥ l·ªói x·∫£y ra khi c·∫≠p nh·∫≠t. Vui l√≤ng th·ª≠ l·∫°i.");
              });
          });
        });


        // ƒê·ª£i DOM load tr∆∞·ªõc khi ch·∫°y script
        document.addEventListener("DOMContentLoaded", function () {
          // H√†m l·∫•y gi√° tr·ªã t·ª´ cookie
          function getCookie(name) {
            let cookies = document.cookie.split("; ");
            for (let i = 0; i < cookies.length; i++) {
              let parts = cookies[i].split("=");
              if (parts[0] === name) {
                return decodeURIComponent(parts[1]);
              }
            }
            return ""; // Tr·∫£ v·ªÅ chu·ªói r·ªóng n·∫øu kh√¥ng t√¨m th·∫•y
          }

          // Hi·ªÉn th·ªã th√¥ng tin ng∆∞·ªùi d√πng khi m·ªü modal
          let chatButton = document.querySelector(".chat-btn");
          if (chatButton) {
            chatButton.addEventListener("click", function () {
              let hoTenEl = document.getElementById("popup-ho-ten");
              let emailEl = document.getElementById("popup-email");
              let usernameEl = document.getElementById("popup-username");
              let tuoiEl = document.getElementById("popup-tuoi");
              let soDienThoaiEl = document.getElementById("popup-so-dien-thoai");
              let diaChiEl = document.getElementById("popup-dia-chi");

              // Ki·ªÉm tra xem c√°c ph·∫ßn t·ª≠ c√≥ t·ªìn t·∫°i tr∆∞·ªõc khi g√°n gi√° tr·ªã
              if (hoTenEl && emailEl && usernameEl && tuoiEl && soDienThoaiEl && diaChiEl) {
                hoTenEl.innerText = getCookie("hoTen") || "Ch∆∞a ƒëƒÉng nh·∫≠p";
                emailEl.innerText = getCookie("email") || "Ch∆∞a ƒëƒÉng nh·∫≠p";
                usernameEl.innerText = getCookie("username") || "Ch∆∞a ƒëƒÉng nh·∫≠p";
                tuoiEl.innerText = getCookie("tuoi") || "Ch∆∞a c√≥ d·ªØ li·ªáu";
                soDienThoaiEl.innerText = getCookie("soDienThoai") || "Ch∆∞a c√≥ d·ªØ li·ªáu";
                diaChiEl.innerText = getCookie("diaChi") || "Ch∆∞a c√≥ d·ªØ li·ªáu";
              } else {
                console.error("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ hi·ªÉn th·ªã th√¥ng tin ng∆∞·ªùi d√πng.");
              }
            });
          } else {
            console.error("Kh√¥ng t√¨m th·∫•y n√∫t m·ªü modal. Ki·ªÉm tra l·∫°i class.");
          }
        });

        document.addEventListener("DOMContentLoaded", function () {
          let logoutBtn = document.getElementById("logoutBtn");

          if (!logoutBtn) {
            console.error("Kh√¥ng t√¨m th·∫•y n√∫t ƒëƒÉng xu·∫•t.");
            return;
          }

          logoutBtn.addEventListener("click", function () {
            if (!document.cookie.includes("username=")) {
              alert("B·∫°n ch∆∞a ƒëƒÉng nh·∫≠p!");
              return;
            }

            // H√†m x√≥a cookie
            function deleteCookie(name) {
              document.cookie = name + "=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
              document.cookie = name + "=; path=/; domain=" + window.location.hostname + "; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
            }

            // X√≥a danh s√°ch cookie li√™n quan ƒë·∫øn t√†i kho·∫£n
            ["username", "hoTen", "email", "tuoi", "soDienThoai", "diaChi"].forEach(deleteCookie);

            // Log ƒë·ªÉ ki·ªÉm tra
            console.log("Cookies sau khi x√≥a:", document.cookie);

            // C·∫≠p nh·∫≠t giao di·ªán (t·∫£i l·∫°i trang)
            alert("B·∫°n ƒë√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng!");
            window.location.reload();
          });
        });



        document.addEventListener("DOMContentLoaded", function () {
          document.querySelector(".chat-btn").addEventListener("click", function (event) {
            event.preventDefault(); // NgƒÉn t·∫£i l·∫°i trang
            var myModal = new bootstrap.Modal(document.getElementById('userModal'));
            myModal.show();
          });
        });
      </script>
  </main>

  <footer class="footer" style="background-color:#873e23; height: 200px;">
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/trangchu/main-trangchu.js"></script>


</body>

</html>