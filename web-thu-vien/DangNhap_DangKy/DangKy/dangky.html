<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng Ký</title>
    <link rel="stylesheet" href="dangky.css">
</head>

<body class="loading">
    <!-- Loading Animation -->
    <div id="loading"></div>

    <script>
        document.body.classList.add('loading');

        document.addEventListener("DOMContentLoaded", function () {
            setTimeout(function () {
                document.body.classList.remove('loading');
                document.body.classList.add('loaded');
            }, 1500);
            console.log("Trang đã tải xong!");
        });

        document.addEventListener("DOMContentLoaded", function () {
            const loginForm = document.getElementById("login-form");

            if (loginForm) {
                loginForm.addEventListener("submit", function (e) {
                    e.preventDefault();

                    const username = document.getElementById("username").value;
                    const password = document.getElementById("password").value;

                    loginForm.submit();
                });
            }
        });

        document.addEventListener("DOMContentLoaded", function () {
            document.querySelector("form").addEventListener("submit", function (event) {
                event.preventDefault(); // Ngăn chặn tải lại trang

                let formData = {
                    username: document.querySelector("input[name='username']").value,
                    password: document.querySelector("input[name='password']").value,
                    fullname: document.querySelector("input[name='fullname']").value,
                    age: document.querySelector("input[name='age']").value,
                    email: document.querySelector("input[name='email']").value,
                    phone: document.querySelector("input[name='phone']").value,
                    address: document.querySelector("textarea[name='address']").value,
                };

                fetch("dangky.php", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(formData),
                })
                    .then(response => response.json())
                    .then(data => {
                        alert(data.message);
                        if (data.status === "success") {
                            window.location.href = "http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/DangNhap_DangKy/DangNhap/dangnhap.html"; // Chuyển hướng sau khi đăng ký thành công
                        }
                    })
                    .catch(error => console.error("Lỗi:", error));
            });
        });

        function togglePassword() {
            var passwordInput = document.getElementById("password");
            var eyeIcon = document.getElementById("eye-icon");

            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                eyeIcon.classList.remove("fa-eye");
                eyeIcon.classList.add("fa-eye-slash");
            } else {
                passwordInput.type = "password";
                eyeIcon.classList.remove("fa-eye-slash");
                eyeIcon.classList.add("fa-eye");
            }
        }
    </script>
    <div class="container d-flex justify-content-center align-items-center vh-100">
        <div class="card p-4 shadow-lg" id="register-form">
            <img src="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/img/tin-tuc-5.png" alt="Logo"
                class="login-logo mb-3">
            <h2 class="text-center" style="font-weight: bold;">Đăng Ký</h2>
            <form action="dangky.php" method="POST">
                <!-- Tài khoản -->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                    <input type="text" class="form-control" name="username" placeholder="Tài khoản" required>
                </div>

                <!-- Mật khẩu với chức năng hiển thị -->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                    <input type="password" class="form-control" id="password" name="password" placeholder="Mật khẩu"
                        required>
                    <span class="input-group-text toggle-password" onclick="togglePassword()">
                        <i class="fas fa-eye" id="eye-icon"></i>
                    </span>
                </div>

                <!-- Họ và Tên -->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                    <input type="text" class="form-control" name="fullname" placeholder="Họ và Tên" required>
                </div>

                <!-- Tuổi -->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fas fa-birthday-cake"></i></span>
                    <input type="number" class="form-control" name="age" id="age" placeholder="Tuổi" min="1" max="100"
                        required>
                </div>

                <!-- Email -->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                    <input type="email" class="form-control" name="email" placeholder="Email" required>
                </div>

                <!-- Số điện thoại -->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fas fa-phone"></i></span>
                    <input type="text" class="form-control" name="phone" placeholder="Số điện thoại" maxlength="15">
                </div>

                <!-- Địa chỉ -->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fas fa-map-marker-alt"></i></span>
                    <textarea class="form-control" name="address" placeholder="Địa chỉ"></textarea>
                </div>

                <!-- Nút Đăng Ký -->
                <button type="submit" class="btn btn-primary w-100">Đăng Ký</button>
            </form>

            <!-- Đăng nhập -->
            <p class="text-center mt-3">Đã có tài khoản? <a
                    href="http://localhost/PHP-project/Web%20Th%c6%b0%20vi%e1%bb%87n/DangNhap_DangKy/DangNhap/dangnhap.html">Đăng
                    nhập</a></p>
        </div>
    </div>

    <!-- Thêm Bootstrap và Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</body>

</html>